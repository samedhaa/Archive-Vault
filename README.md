# ArchiveVault

A personal digital archive system built with Laravel. Store, organize, and preserve your photos, videos, documents, and precious memories in a secure, private, and beautifully designed application.

## Features

- **Organize Everything**: Create unlimited archives to organize files by events, dates, or categories
- **File Management**: Upload and manage photos, videos, PDFs, and documents (up to 20MB per file)
- **Search & Filter**: Find archives by keywords, dates, file types, and categories
- **Secure & Private**: User authentication with personal, private archives
- **Modern UI**: Clean, responsive design with drag-and-drop file uploads
- **File Preview**: Image previews and file metadata display

## Authors

Built with [Claude Code](https://claude.com/claude-code)

## Requirements

- **PHP**: 8.4 or higher
- **Laravel**: 12.x
- **Node.js**: 18.x or higher (for frontend assets)
- **SQLite**: 3.x (default database)
- **Composer**: 2.x
- **NPM**: 9.x or higher

### PHP Extensions

- BCMath
- Ctype
- Fileinfo
- JSON
- Mbstring
- OpenSSL
- PDO
- SQLite3
- Tokenizer
- XML

## Environment Variables

Copy `.env.example` to `.env` and configure the following:

### Application

```env
APP_NAME=ArchiveVault
APP_ENV=local
APP_KEY=                        # Generated by `php artisan key:generate`
APP_DEBUG=true
APP_URL=http://localhost
```

### Database

```env
DB_CONNECTION=sqlite            # Using SQLite by default
```

For MySQL/PostgreSQL, uncomment and configure:
```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=archivevault
DB_USERNAME=root
DB_PASSWORD=
```

### Session & Cache

```env
SESSION_DRIVER=database         # Sessions stored in database
CACHE_STORE=database            # Cache stored in database
QUEUE_CONNECTION=database       # Queue jobs in database
```

### File Storage

```env
FILESYSTEM_DISK=local           # Files stored in storage/app/public
```

### Mail (for password resets)

```env
MAIL_MAILER=log                 # Uses log for development
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"
```

For production, configure SMTP:
```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=your_username
MAIL_PASSWORD=your_password
```

## Dev Installation Instructions

### 1. Clone the Repository

```bash
git clone <repository-url>
cd Arch
```

### 2. Install PHP Dependencies

```bash
composer install
```

### 3. Install Node Dependencies

```bash
npm install
```

### 4. Set Up Environment

```bash
# Copy environment file
cp .env.example .env

# Generate application key
php artisan key:generate
```

### 5. Create Database

For SQLite (default):
```bash
touch database/database.sqlite
```

For MySQL/PostgreSQL, create the database manually and update `.env`

### 6. Run Migrations

```bash
php artisan migrate
```

### 7. Create Storage Symlink

```bash
php artisan storage:link
```

This creates a symbolic link from `public/storage` to `storage/app/public` for file uploads.

### 8. Build Frontend Assets

For development:
```bash
npm run dev
```

For production:
```bash
npm run build
```

### 9. Start Development Server

Using Laravel's built-in server:
```bash
php artisan serve
```

Or using Laravel Herd (recommended for macOS):
```bash
# Just park the directory and access at http://arch.test
herd park
```

### 10. Access the Application

- **Local server**: http://localhost:8000
- **Laravel Herd**: http://arch.test

### 11. Create Your First User

Visit the application and click "Get Started" or "Register" to create your account.

## Project Structure

```
Arch/
├── app/
│   ├── Http/
│   │   ├── Controllers/
│   │   │   ├── ArchiveItemController.php  # Archive CRUD operations
│   │   │   ├── AssetController.php        # File upload/download
│   │   │   └── Auth/                      # Authentication controllers
│   │   └── Requests/                      # Form validation
│   ├── Models/
│   │   ├── ArchiveItem.php                # Archive model
│   │   ├── Asset.php                      # File asset model
│   │   └── User.php                       # User model
│   └── Policies/
│       └── ArchiveItemPolicy.php          # Archive authorization
├── database/
│   └── migrations/                        # Database migrations
├── resources/
│   ├── css/
│   │   └── app.css                        # Tailwind CSS
│   ├── js/
│   │   └── app.js                         # Alpine.js
│   └── views/
│       ├── archives/                      # Archive views
│       ├── auth/                          # Authentication views
│       └── layouts/                       # Layout templates
├── routes/
│   ├── web.php                            # Web routes
│   └── auth.php                           # Authentication routes
└── storage/
    └── app/
        └── public/                        # File uploads directory
```

## Common Commands

```bash
# Clear all caches
php artisan optimize:clear

# Run tests
php artisan test

# Check routes
php artisan route:list

# Create new migration
php artisan make:migration create_table_name

# Rebuild frontend assets
npm run build
```

## Testing

Run the test suite:

```bash
php artisan test
```

Using Pest for feature and unit tests:

```bash
# Run specific test file
php artisan test --filter=ArchiveTest

# Run with coverage
php artisan test --coverage
```

## Deployment

### Production Checklist

1. Set environment to production:
   ```env
   APP_ENV=production
   APP_DEBUG=false
   ```

2. Configure production database

3. Set up proper mail driver (SMTP, Mailgun, etc.)

4. Build production assets:
   ```bash
   npm run build
   ```

5. Optimize application:
   ```bash
   php artisan config:cache
   php artisan route:cache
   php artisan view:cache
   ```

6. Set proper file permissions:
   ```bash
   chmod -R 775 storage bootstrap/cache
   ```

7. Configure web server (Nginx/Apache) to point to `public/` directory

8. Set up SSL certificate for HTTPS

9. Configure backups for database and uploaded files

## Security

- All routes are protected with authentication middleware
- File uploads are validated and rate-limited (60 per minute)
- Authorization policies ensure users can only access their own archives
- CSRF protection on all forms
- XSS protection via Blade template escaping
- SQL injection protection via Eloquent ORM

## License

This project is open-source software.

## Support

For issues or questions, please open an issue on the repository.
